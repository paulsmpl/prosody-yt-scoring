services:
  web:
    build: ./backend
    volumes:
      - ./backend/app/storage:/app/app/storage
    environment:
      - STORAGE_DIR=/app/app/storage
      - COOKIES_PATH=/app/app/storage/cookies.txt
      - YTDLP_ARGS=
  nginx:
    image: nginx:1.27-alpine
    depends_on:
      - web
    ports:
      - "8080:8080"
      - "8443:8443"
    volumes:
      - ./deploy/nginx-docker.conf:/etc/nginx/conf.d/default.conf:ro
      - ./deploy/certs:/etc/nginx/certs:ro
